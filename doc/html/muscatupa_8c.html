<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>McCabeism: muscatupa.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">McCabeism
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('muscatupa_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">muscatupa.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Multi-scale Turing patterns based on Jonathan McCabe's work.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;float.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;gifsave/gifsave89.c&quot;</code><br />
<code>#include &quot;<a class="el" href="utils_8h_source.html">utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="blur_8h_source.html">blur.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for muscatupa.c:</div>
<div class="dyncontent">
<div class="center"><img src="muscatupa_8c__incl.png" border="0" usemap="#muscatupa_8c" alt=""/></div>
<map name="muscatupa_8c" id="muscatupa_8c">
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpattern.html">pattern</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">One Turing pattern/one scale.  <a href="structpattern.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a70d330906276a996f7dab090a03ce2a5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a70d330906276a996f7dab090a03ce2a5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a70d330906276a996f7dab090a03ce2a5">COLOR_DEPTH</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:a70d330906276a996f7dab090a03ce2a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of color levels in the final image. <br /></td></tr>
<tr class="separator:a70d330906276a996f7dab090a03ce2a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0f5c129e2a8c0f5ee5608a6c1a37d5c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae0f5c129e2a8c0f5ee5608a6c1a37d5c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#ae0f5c129e2a8c0f5ee5608a6c1a37d5c">N_REPEATS</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ae0f5c129e2a8c0f5ee5608a6c1a37d5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">0: loop the gif animation <br /></td></tr>
<tr class="separator:ae0f5c129e2a8c0f5ee5608a6c1a37d5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bf242ff6ff9433d7ce6f0ee7c9b40a5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4bf242ff6ff9433d7ce6f0ee7c9b40a5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a4bf242ff6ff9433d7ce6f0ee7c9b40a5">T_FRAME</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:a4bf242ff6ff9433d7ce6f0ee7c9b40a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">*10 ms: timespan of a gif frame <br /></td></tr>
<tr class="separator:a4bf242ff6ff9433d7ce6f0ee7c9b40a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2cbbe762a1a1175055cf68cd586adc1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad2cbbe762a1a1175055cf68cd586adc1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#ad2cbbe762a1a1175055cf68cd586adc1">TRANSPARENCY</a>&#160;&#160;&#160;-1</td></tr>
<tr class="memdesc:ad2cbbe762a1a1175055cf68cd586adc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">-1: no transparency <br /></td></tr>
<tr class="separator:ad2cbbe762a1a1175055cf68cd586adc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae14b7de1904d34373e78106ef8ce6fa1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae14b7de1904d34373e78106ef8ce6fa1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#ae14b7de1904d34373e78106ef8ce6fa1">DISPOSAL</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ae14b7de1904d34373e78106ef8ce6fa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Don't really know the influence of that. <br /></td></tr>
<tr class="separator:ae14b7de1904d34373e78106ef8ce6fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1705ac3d693fc6b12b8c6c15060215b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab1705ac3d693fc6b12b8c6c15060215b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PATH_TO_GIF</b>&#160;&#160;&#160;&quot;0.gif&quot;</td></tr>
<tr class="separator:ab1705ac3d693fc6b12b8c6c15060215b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee51a35c2cbe74feae599a984ad8f913"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aee51a35c2cbe74feae599a984ad8f913"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#aee51a35c2cbe74feae599a984ad8f913">N_SCALES</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:aee51a35c2cbe74feae599a984ad8f913"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of Turing patterns/scales. <br /></td></tr>
<tr class="separator:aee51a35c2cbe74feae599a984ad8f913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a649b8f01fd6c0f47ff3cbddaeba63bfb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a649b8f01fd6c0f47ff3cbddaeba63bfb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a649b8f01fd6c0f47ff3cbddaeba63bfb">W</a>&#160;&#160;&#160;300</td></tr>
<tr class="memdesc:a649b8f01fd6c0f47ff3cbddaeba63bfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Image width. <br /></td></tr>
<tr class="separator:a649b8f01fd6c0f47ff3cbddaeba63bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abec92cc72a096640b821b8cd56a02495"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abec92cc72a096640b821b8cd56a02495"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#abec92cc72a096640b821b8cd56a02495">H</a>&#160;&#160;&#160;300</td></tr>
<tr class="memdesc:abec92cc72a096640b821b8cd56a02495"><td class="mdescLeft">&#160;</td><td class="mdescRight">Image height. <br /></td></tr>
<tr class="separator:abec92cc72a096640b821b8cd56a02495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fea219f6b5d791e67351c89c6522e9e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4fea219f6b5d791e67351c89c6522e9e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a4fea219f6b5d791e67351c89c6522e9e">N_STEPS</a>&#160;&#160;&#160;200</td></tr>
<tr class="memdesc:a4fea219f6b5d791e67351c89c6522e9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of timesteps to generate. <br /></td></tr>
<tr class="separator:a4fea219f6b5d791e67351c89c6522e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b9f9e7313eee63e30eec8c61f85630b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3b9f9e7313eee63e30eec8c61f85630b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a3b9f9e7313eee63e30eec8c61f85630b">ANIMATE</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a3b9f9e7313eee63e30eec8c61f85630b"><td class="mdescLeft">&#160;</td><td class="mdescRight">0 to save only the last generated picture <br /></td></tr>
<tr class="separator:a3b9f9e7313eee63e30eec8c61f85630b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1174cf1d0d52b471a06b19133db7c498"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a1174cf1d0d52b471a06b19133db7c498">init_image</a> (uint32_t w, uint32_t h, float s[][h])</td></tr>
<tr class="memdesc:a1174cf1d0d52b471a06b19133db7c498"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the image with random values.  <a href="#a1174cf1d0d52b471a06b19133db7c498">More...</a><br /></td></tr>
<tr class="separator:a1174cf1d0d52b471a06b19133db7c498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d3d433d5a8fd26c1e96abde005989c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a91d3d433d5a8fd26c1e96abde005989c">build_colormap</a> (uint32_t depth, int32_t *colors)</td></tr>
<tr class="memdesc:a91d3d433d5a8fd26c1e96abde005989c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build the RGB colormap for gifsave89.  <a href="#a91d3d433d5a8fd26c1e96abde005989c">More...</a><br /></td></tr>
<tr class="separator:a91d3d433d5a8fd26c1e96abde005989c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a459cd7e6f5365bb5cc9ff11e2a7c9d4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a459cd7e6f5365bb5cc9ff11e2a7c9d4d">step</a> (struct <a class="el" href="structpattern.html">pattern</a> *p, uint32_t n, uint32_t w, uint32_t h, float im[][h])</td></tr>
<tr class="memdesc:a459cd7e6f5365bb5cc9ff11e2a7c9d4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">One step of the main algorithm.  <a href="#a459cd7e6f5365bb5cc9ff11e2a7c9d4d">More...</a><br /></td></tr>
<tr class="separator:a459cd7e6f5365bb5cc9ff11e2a7c9d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6869750b31ffe3ad4547dc5f8246dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#acd6869750b31ffe3ad4547dc5f8246dc">compute_var</a> (uint32_t n, uint32_t w, uint32_t h, float act[][w][h], float inh[][w][h], float var[][w][h], float *lst_var)</td></tr>
<tr class="memdesc:acd6869750b31ffe3ad4547dc5f8246dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the variation arrays for all scales.  <a href="#acd6869750b31ffe3ad4547dc5f8246dc">More...</a><br /></td></tr>
<tr class="separator:acd6869750b31ffe3ad4547dc5f8246dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9a48b1e604f18b15068cdf55f910157"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#ad9a48b1e604f18b15068cdf55f910157">update_image</a> (struct <a class="el" href="structpattern.html">pattern</a> *p, uint32_t w, uint32_t h, float im[][h], float act[][h], float inh[][h])</td></tr>
<tr class="memdesc:ad9a48b1e604f18b15068cdf55f910157"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the image on one single scale.  <a href="#ad9a48b1e604f18b15068cdf55f910157">More...</a><br /></td></tr>
<tr class="separator:ad9a48b1e604f18b15068cdf55f910157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39063acdc7327a6fc6f0930c51a03545"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a39063acdc7327a6fc6f0930c51a03545">normalize_image</a> (uint32_t w, uint32_t h, float im[][h])</td></tr>
<tr class="memdesc:a39063acdc7327a6fc6f0930c51a03545"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalize the image back to the interval [-1; 1].  <a href="#a39063acdc7327a6fc6f0930c51a03545">More...</a><br /></td></tr>
<tr class="separator:a39063acdc7327a6fc6f0930c51a03545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71b221a9ed0ab0fe716154d66f986155"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a71b221a9ed0ab0fe716154d66f986155">convert_image</a> (uint32_t w, uint32_t h, float im_float[][h], uint8_t im_bytes[][h])</td></tr>
<tr class="memdesc:a71b221a9ed0ab0fe716154d66f986155"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the image from floats to bytes.  <a href="#a71b221a9ed0ab0fe716154d66f986155">More...</a><br /></td></tr>
<tr class="separator:a71b221a9ed0ab0fe716154d66f986155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a308d6b009aca4bffbd4069755ed191fa"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a308d6b009aca4bffbd4069755ed191fa">write_gif</a> (unsigned char *gif_image, uint32_t n_bytes)</td></tr>
<tr class="memdesc:a308d6b009aca4bffbd4069755ed191fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write image to a gif file.  <a href="#a308d6b009aca4bffbd4069755ed191fa">More...</a><br /></td></tr>
<tr class="separator:a308d6b009aca4bffbd4069755ed191fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turing pattern generator.  <a href="#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad54e871ebcf8f74ab79df991f74327f4"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#ad54e871ebcf8f74ab79df991f74327f4">act_r_all</a> [<a class="el" href="muscatupa_8c.html#aee51a35c2cbe74feae599a984ad8f913">N_SCALES</a>] = {10, 25, 10, 5}</td></tr>
<tr class="memdesc:ad54e871ebcf8f74ab79df991f74327f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameters of the Turing patterns.  <a href="#ad54e871ebcf8f74ab79df991f74327f4">More...</a><br /></td></tr>
<tr class="separator:ad54e871ebcf8f74ab79df991f74327f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61ffb19debc5a306f7b8b1469d2e0da3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a61ffb19debc5a306f7b8b1469d2e0da3"></a>
const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#a61ffb19debc5a306f7b8b1469d2e0da3">inh_r_all</a> [<a class="el" href="muscatupa_8c.html#aee51a35c2cbe74feae599a984ad8f913">N_SCALES</a>] = {20, 50, 20, 10}</td></tr>
<tr class="memdesc:a61ffb19debc5a306f7b8b1469d2e0da3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inhibitor radii. <br /></td></tr>
<tr class="separator:a61ffb19debc5a306f7b8b1469d2e0da3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa4f0d25e5750ea3e646a9f274355c92"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa4f0d25e5750ea3e646a9f274355c92"></a>
const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="muscatupa_8c.html#aaa4f0d25e5750ea3e646a9f274355c92">sa_all</a> [<a class="el" href="muscatupa_8c.html#aee51a35c2cbe74feae599a984ad8f913">N_SCALES</a>] = {0.05, 0.04, 0.03, 0.02}</td></tr>
<tr class="memdesc:aaa4f0d25e5750ea3e646a9f274355c92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Small amounts. <br /></td></tr>
<tr class="separator:aaa4f0d25e5750ea3e646a9f274355c92"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Multi-scale Turing patterns based on Jonathan McCabe's work. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a91d3d433d5a8fd26c1e96abde005989c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void build_colormap </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>colors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build the RGB colormap for gifsave89. </p>
<p>The colormap associates an RGB value for each pixel value. For instance, with a pixel depth of 1 bit, the colormap could be: {0, 0, 0, 255, 255, 255, -1} -&gt; a pixel value of 0 is black, pixel 1 is white, and the array is terminated with -1. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">depth</td><td>color depth </td></tr>
    <tr><td class="paramname">colors</td><td>colormap array (overwritten) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acd6869750b31ffe3ad4547dc5f8246dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_var </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>act</em>[][w][h], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>inh</em>[][w][h], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>var</em>[][w][h], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>lst_var</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the variation arrays for all scales. </p>
<p>The variation is simply |activator[x][y] - inhibitor[x][y]| for each pixel. Normally there should be an averaging over a radius, but it's simpler to code that for a single-pixel radius and in theory it gives better pictures. Although the smallest variation for each scale could be computed in another function, it's more elegant to do it here since we're going through the whole array anyway. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>number of Turing patterns </td></tr>
    <tr><td class="paramname">w</td><td>width of the image </td></tr>
    <tr><td class="paramname">h</td><td>height of the image </td></tr>
    <tr><td class="paramname">act</td><td>activator arrays </td></tr>
    <tr><td class="paramname">inh</td><td>inhibitor arrays </td></tr>
    <tr><td class="paramname">var</td><td>variation arrays (overwritten) </td></tr>
    <tr><td class="paramname">lst_var</td><td>least variations for all scales (overwritten) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a71b221a9ed0ab0fe716154d66f986155"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void convert_image </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>im_float</em>[][h], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>im_bytes</em>[][h]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the image from floats to bytes. </p>
<p>The input image has values E[-1; 1] and the output E[0; 255] to write those values in a grayscale picture. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">w</td><td>width of the image </td></tr>
    <tr><td class="paramname">h</td><td>height of the image </td></tr>
    <tr><td class="paramname">im_float</td><td>input image </td></tr>
    <tr><td class="paramname">im_bytes</td><td>output image (overwritten) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1174cf1d0d52b471a06b19133db7c498"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_image </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>s</em>[][h]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the image with random values. </p>
<p>The w*h array is filled with values E[-1; 1]. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">w</td><td>width of the image </td></tr>
    <tr><td class="paramname">h</td><td>height of the image </td></tr>
    <tr><td class="paramname">s</td><td>source image in a 2D array (overwritten) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turing pattern generator. </p>
<dl class="section return"><dt>Returns</dt><dd>0 when successful </dd></dl>

</div>
</div>
<a class="anchor" id="a39063acdc7327a6fc6f0930c51a03545"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void normalize_image </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>im</em>[][h]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Normalize the image back to the interval [-1; 1]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">w</td><td>width of the image </td></tr>
    <tr><td class="paramname">h</td><td>height of the image </td></tr>
    <tr><td class="paramname">im</td><td>image (overwritten) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a459cd7e6f5365bb5cc9ff11e2a7c9d4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void step </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpattern.html">pattern</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>im</em>[][h]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>One step of the main algorithm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>array of Turing patterns </td></tr>
    <tr><td class="paramname">n</td><td>number of Turing patterns </td></tr>
    <tr><td class="paramname">w</td><td>width of the image </td></tr>
    <tr><td class="paramname">h</td><td>height of the image </td></tr>
    <tr><td class="paramname">im</td><td>image (overwritten) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad9a48b1e604f18b15068cdf55f910157"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_image </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpattern.html">pattern</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>im</em>[][h], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>act</em>[][h], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>inh</em>[][h]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the image on one single scale. </p>
<p>Each pixel of the image is increased/decreased by a small amount depending on the activator and inhibitor value at those coordinates. This function is normally called with the parameters of the smallest-variation scale. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>a Turing pattern </td></tr>
    <tr><td class="paramname">w</td><td>width of the image </td></tr>
    <tr><td class="paramname">h</td><td>height of the image </td></tr>
    <tr><td class="paramname">im</td><td>image (overwritten) </td></tr>
    <tr><td class="paramname">act</td><td>activator array </td></tr>
    <tr><td class="paramname">inh</td><td>inhibitor array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a308d6b009aca4bffbd4069755ed191fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t write_gif </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>gif_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write image to a gif file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gif_image</td><td>the gifsave89 buffer </td></tr>
    <tr><td class="paramname">n_bytes</td><td>number of bytes to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of written bytes </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ad54e871ebcf8f74ab79df991f74327f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t act_r_all[<a class="el" href="muscatupa_8c.html#aee51a35c2cbe74feae599a984ad8f913">N_SCALES</a>] = {10, 25, 10, 5}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parameters of the Turing patterns. </p>
<p>Activator radii </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="muscatupa_8c.html">muscatupa.c</a></li>
    <li class="footer">Generated on Thu Aug 18 2016 16:54:18 for McCabeism by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
